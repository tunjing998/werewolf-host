# 狼人杀法官面板（单文件版）

这是一个为狼人杀法官设计的工具网站，使用 **HTML + CSS + JavaScript**，不依赖后端、不依赖第三方库。  
所有功能都集中在一个 `index.html` 文件中，直接用浏览器打开即可使用。

---

## ✨ 功能清单

- **玩家与职业管理**
  - 设置玩家总人数（自动生成 P1、P2…）
  - 修改玩家昵称
  - 标记玩家存活/死亡
  - 输入各职业数量（如：狼人、村民、预言家、女巫、猎人、守卫、白痴），数量总和不得超过玩家数
  - 为每位玩家**选择**职业（受职业数量上限限制）
  - 点击“开始游戏”后上述输入将被锁定，防止误改


- **阶段与步骤**
  - 夜晚：狼人行动 → 预言家验人 → 女巫用药 → 守卫守人
  - 白天：遗言/公投发言 → 讨论 → 投票处决
  - 上一步 / 下一步 控制流程
  - 白天结束后自动进入下一天（Round +1）

- **投票面板**
  - 记录每位玩家的投票对象
  - 支持弃票
  - 一键结算（显示最高票玩家，支持并列）
  - 投票历史保存（含玩家职业，每个阶段仅保留一次记录）
  - 一键重置投票

- **计时器**
  - 设置倒计时时长（默认 120 秒）
  - 开始 / 暂停 / 重置

- **事件日志**
  - 自动记录阶段切换、投票结算等操作

- **数据持久化**
  - 自动保存至浏览器 `localStorage`（刷新不丢失）
  - 一键导出为 JSON
  - 一键导入 JSON（恢复对局）

---

## 📂 文件结构

本项目只有一个文件：
index.html // 含 HTML、CSS、JS

---

## 🚀 使用方法

### 本地打开
1. 下载或创建 `index.html`
2. 双击文件，或右键 → 浏览器打开
3. 开始游戏！

---

## 🕹 使用说明

1. **基础设置区**
   - 设置人数，修改昵称
   - 输入各职业数量（仅作记录，不做分配，数量总和不得超过玩家数）
   - 点击“开始游戏”后上述设置将被锁定

2. **阶段面板**
   - 显示当前天数、阶段、步骤
   - 点击 “下一步” 或 “上一步” 控制流程
   - 完成白天后自动进入下一天夜晚

3. **投票面板**
   - 选择投票者，为其记录投票对象或弃票
   - 点击 “结算投票” 生成投票结果并写入历史（附玩家职业）
   - 点击 “重置投票” 清空当轮记录

4. **计时器**  
   - 输入秒数，点击开始  
   - 可随时暂停或重置

5. **日志与保存**  
   - 所有操作会写入日志  
   - 可导出/导入 JSON 文件保存与恢复局势  

---

## 📖 游戏规则与流程（Sample）

### 🎯 阵营胜利条件
- **狼人阵营**：目标为 **屠边** —— 只要神职（女巫、预言家、猎人、愚者）和平民一方全数出局，则狼人获胜。  
- **好人阵营**：目标为击败狼人 —— 4 个狼人全部出局，好人阵营获胜。  

---

### 🧑‍🤝‍🧑 角色说明

- **狼人（4人）**  
  - 每晚可以选择击杀一名玩家  

- **预言家（1人）**  
  - 每晚可以查验一名玩家的阵营（好 / 坏）  

- **女巫（1人）**  
  - 拥有 **一瓶解药**（可救人）和 **一瓶毒药**（可杀人），全局仅各一次  
  - 若仍有解药，当晚可得知谁死亡，并选择是否救人  
  - 若仍有毒药，当晚可选择一名玩家下毒  
  - 每晚只能执行一种操作（救人或毒人）  

- **猎人（1人）**  
  - 若被狼人击杀或白天投票出局，可以发动技能带走一名玩家  
  - 若被女巫毒死，技能无法发动  
  - 每晚可得知自己是否能在白天发动技能（若被下毒会被告知无法发动技能）  

- **愚者（1人）**  
  - 夜晚无技能  
  - 白天若被投票出局，可以翻牌自证身份  

---

### 🌙 第一天夜晚流程

1. 狼人睁眼 → 选择击杀对象（法官公布击杀目标 X）  
2. 女巫睁眼 → 法官公布死亡目标 X  
   - 女巫选择是否使用解药  
   - 女巫选择是否使用毒药（目标 X）  
3. 预言家睁眼 → 查验目标 → 法官公布其身份（好 / 坏）  
4. 猎人睁眼 → 法官告知其是否可开枪（好 / 坏）  
5. 愚者睁眼（身份确认）  
6. 要上警的玩家举手  

---

### ☀️ 第一天白天流程

1. 上警玩家顺/逆序发言  
2. 下警玩家投票选出警长  
   - 警长拥有 **1.5 票**  
   - 警长可决定发言顺序（从左 / 右开始）  
3. 两种情况：  
   - 玩家被投票出局 → 发表遗言 → 若为猎人，可发动技能  
   - 狼人自爆 → 直接进入夜晚（狼人专属技能）  

---

### 🌙 第二天夜晚流程（及后续夜晚）

1. 狼人睁眼 → 选择击杀目标  
2. 女巫睁眼 → 法官公布死亡目标 X → 女巫选择是否用解药 / 毒药  
3. 预言家睁眼 → 查验目标 → 法官公布其身份（好 / 坏）  
4. 猎人睁眼 → 法官告知其是否可开枪  

---

### ☀️ 第二天白天流程（及后续白天）

1. 若警长死亡，可选择将警徽交给一名玩家  
2. 警长决定发言顺序（左 / 右）  
3. 两种情况：  
   - 玩家被投票出局 → 发表遗言 → 若为猎人，可发动技能  
   - 狼人自爆 → 直接进入夜晚  

---

## 🔒 数据模型（简化）

```js
Player = {
  id: "P1",
  name: "玩家1",
  alive: true,
  role: "wolf" // 仅作记录
}

VoteRecord = {
  phaseKey: "day",
  round: 1,
  votes: { "P1": "P3", "P2": "abstain" },
  result: ["P3"],
  roles: { "P1": "wolf", "P2": "villager" },
  time: "2025-08-17 20:00:00"
}

State（整体状态）:
{
  players: Player[];
  roleCounts: { [roleKey]: number };
  phases: { key: string; name: string; steps: string[] }[];
  currentPhaseIndex: number;
  currentStepIndex: number;
  round: number;
  votes: { [voterId]: string };
  voteHistory: VoteRecord[];
  timer: { seconds: number; running: boolean };
  logs: { time: string; text: string }[];
  gameStarted: boolean;
}
```

## 🎨 设计约定

- **视觉**：深浅对比明显，移动端优先布局  
- **可访问性**：大按钮、清晰文字对比度  
- **性能**：纯原生 JS，不引入框架  
- **存储**：localStorage + JSON 导入/导出  
- **单文件**：所有 CSS 与 JS 内联，方便部署  

---

## 🛠 后续扩展（计划）

- 自定义职业与阶段模板  
- 房规预设（12人局、9人局等）  
- 投票 PK 环节支持  
- 统计面板（投票次数、处决原因）  
- 简单主题切换  
- PWA 支持（可安装为桌面应用）  

---

## 📄 许可证

- **License**: MIT  
- **Version**: v0.1.0 (MVP)  